<div class="au-o-flow">
  <AuCard @flex="true" as |c|>
    <c.header @badgeSkin="{{if werkingsgebied "success" "action"}}" @badgeIcon="{{if werkingsgebied "check"}}" @badgeNumber="{{unless werkingsgebied "1"}}">
      <AuHeading @level="2" @skin="4">
        Stap 1: Zoek een gemeente, provincie of district.
      </AuHeading>
    </c.header>
    <c.content>
      <div style="position: relative; overflow: none;">
        <PowerSelect
          @allowClear={{true}}
          @disabled={{disabled}}
          @search={{perform searchTask}}
          @selected={{werkingsgebied}}
          @loadingMessage="Aan het laden..."
          @searchMessage="Typ om te zoeken"
          @noMatchesMessage="Geen resultaten"
          @onchange={{action "listBestuurseenheden"}} as |gebied|>
          {{gebied.longName}}
        </PowerSelect>
      </div>
      <AuHelpText>Oost-Vlaanderen, Berchem, Hasselt, ...</AuHelpText>
    </c.content>
  </AuCard>

  <AuCard @flex="true" as |c|>
    <c.header @badgeIcon="{{if bestuursorganen "check"}}"
    @badgeNumber="{{unless bestuursorganen "2"}}"
    @badgeSkin="{{if bestuursorganen "success" "action"}}">
      <AuHeading @level="2" @skin="4">
        Stap 2: Kies een bestuurseenheid
      </AuHeading>
      {{#unless werkingsgebied}}
      <p>Kies eerst een gemeente, provincie of district.</p>
      {{/unless}}
    </c.header>
    {{#if werkingsgebied}}
    <c.content>
      {{#auto-focus '.focus-bestuursorganen' tagName="" }}
        <div class="au-o-grid au-o-grid--fixed">
          {{#each bestuurseenheden as |eenheid|}}
            <div class="au-o-grid__item au-u-1-1 au-u-1-2@medium au-u-1-3@large focus-bestuursorganen">
              {{organisation-card organisationId=eenheid.id isSelected=(eq selectedBestuurseenheidId eenheid.id)
                classification=eenheid.classificatie.label description=eenheid.classificatie.scopeNote
                name=(concat eenheid.classificatie.label " " eenheid.naam) onSelect=(action "listBestuursorganen")}}
            </div>
          {{/each}}
        </div>
      {{/auto-focus}}
    </c.content>
    {{/if}}
  </AuCard>

  <AuCard @flex="true" as |c|>
    <c.header @badgeNumber="3"
    @badgeSkin="action">
      <AuHeading @level="2" @skin="4">
        Stap 3: Kies een bestuursorgaan
      </AuHeading>
      {{#unless bestuursorganen}}
      <p>Kies eerst een bestuurseenheid.</p>
      {{/unless}}
    </c.header>
    {{#if bestuursorganen}}
    <c.content>
      {{#auto-focus '.focus-bestuurseenheid' tagName="" }}
        <div class="au-o-grid au-o-grid--fixed">
          {{#each bestuursorganen as |orgaan|}}
            <div class="au-o-grid__item au-u-1-1 au-u-1-2@medium focus-bestuurseenheid">
              {{organisation-card organisationId=orgaan.id isSelected=(eq selectedBestuursorgaanId orgaan.id)
                classification=orgaan.classificatie.label description=orgaan.classificatie.scopeNote
                name=orgaan.naam onSelect=(action "viewBestuursorgaan")}}
            </div>
          {{/each}}
        </div>
      {{/auto-focus}}
    </c.content>
    {{/if}}
  </AuCard>
</div>
